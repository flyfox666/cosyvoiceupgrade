[![SVG Banners](https://svg-banners.vercel.app/api?type=origin&text1=CosyVoiceğŸ¤ &text2=Text-to-Speech%20ğŸ’–%20Large%20Language%20Model&width=800&height=210)](https://github.com/Akshay090/svg-banners)

# ğŸš€ å¢å¼ºç‰ˆæœ¬ - ä¸»è¦æ”¹è¿›

> **è¿™æ˜¯å®˜æ–¹CosyVoiceä»“åº“çš„å¢å¼ºç‰ˆæœ¬ï¼Œå¢åŠ äº†é¢å¤–çš„åŠŸèƒ½å’Œæ”¹è¿›ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚**

## âœ¨ æœ¬ç‰ˆæœ¬çš„æ–°åŠŸèƒ½

### ğŸµ éŸ³è‰²åº“ç®¡ç†ç³»ç»Ÿ
- **ä¿å­˜è‡ªå®šä¹‰éŸ³è‰²**ï¼šå°†æ‚¨å–œæ¬¢çš„å…‹éš†éŸ³è‰²ä¿å­˜åˆ°æŒä¹…åŒ–éŸ³è‰²åº“ä¸­ä»¥ä¾¿é‡å¤ä½¿ç”¨
- **ä¾¿æ·åŠ è½½éŸ³è‰²**ï¼šåŠ è½½ä¹‹å‰ä¿å­˜çš„éŸ³è‰²ï¼Œæ— éœ€é‡æ–°ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶
- **éŸ³è‰²ç®¡ç†**ï¼šé€šè¿‡WebUIç»„ç»‡ã€é‡å‘½åå’Œåˆ é™¤éŸ³è‰²é…ç½®æ–‡ä»¶
- **æ–‡ä»¶å¤¹å­˜å‚¨**ï¼šæ¯ä¸ªéŸ³è‰²é…ç½®æ–‡ä»¶å­˜å‚¨åœ¨ `custom_voices/` ç›®å½•ä¸­ï¼ŒåŒ…å«éŸ³é¢‘å’Œå…ƒæ•°æ®

### ğŸ™ï¸ è‡ªåŠ¨è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰
- **è‡ªåŠ¨æ–‡æœ¬æå–**ï¼šä»ä¸Šä¼ çš„éŸ³é¢‘æ–‡ä»¶ä¸­è‡ªåŠ¨æå–æç¤ºæ–‡æœ¬
- **SenseVoiceSmallé›†æˆ**ï¼šç”±FunASRçš„SenseVoiceSmallæ¨¡å‹é©±åŠ¨
- **å¤šè¯­è¨€æ”¯æŒ**ï¼šæ”¯æŒä¸­æ–‡ã€è‹±æ–‡å’Œå…¶ä»–è¯­è¨€
- **èŠ‚çœæ—¶é—´**ï¼šæ— éœ€æ‰‹åŠ¨è¾“å…¥æç¤ºæ–‡æœ¬è¿›è¡Œè¯­éŸ³å…‹éš†

### ğŸ–¥ï¸ å¢å¼ºç‰ˆWebUI (`app_local.py`)
- **æ”¹è¿›çš„ç•Œé¢**ï¼šæ›´å¥½çš„UIç»„ç»‡ï¼Œå¸¦æœ‰éŸ³è‰²åº“ç®¡ç†é¢æ¿
- **éŸ³é¢‘åå¤„ç†**ï¼šè‡ªåŠ¨éŸ³é¢‘å¢å¼ºå’Œæ ‡å‡†åŒ–
- **è‡ªåŠ¨å¯åŠ¨**ï¼šå¯åŠ¨æ—¶è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
- **è¯¦ç»†æ—¥å¿—**ï¼šæä¾›å…¨é¢çš„æ—¥å¿—è¾“å‡ºï¼Œä¾¿äºè°ƒè¯•

### ï¿½ å…¶ä»–åŠŸèƒ½
- **ç¼“å­˜ç®¡ç†**ï¼šæ™ºèƒ½æ¨¡å‹ç¼“å­˜ï¼ŒåŠ å¿«åç»­æ¨ç†é€Ÿåº¦
- **éŸ³è‰²è¿ç§»å·¥å…·**ï¼š`migrate_voices.py` ç”¨äºè½»æ¾è¿ç§»éŸ³è‰²åº“
- **APIæœåŠ¡å™¨**ï¼šå¢å¼ºçš„åŸºäºFastAPIçš„æœåŠ¡å™¨ï¼Œæä¾›é¢å¤–çš„æ¥å£
- **æ›´å¥½çš„æ–‡æ¡£**ï¼šè¯¦å°½çš„READMEï¼Œæä¾›æ¸…æ™°çš„è®¾ç½®è¯´æ˜

### ğŸ“‚ é¡¹ç›®ç»“æ„æ”¹è¿›
```
â”œâ”€â”€ custom_voices/          # æ–°å¢ï¼šéŸ³è‰²åº“å­˜å‚¨
â”œâ”€â”€ voice_manager.py        # æ–°å¢ï¼šéŸ³è‰²ç®¡ç†æ¨¡å—
â”œâ”€â”€ app_local.py            # å¢å¼ºï¼šå¸¦éŸ³è‰²åº“çš„WebUI
â”œâ”€â”€ cache_manager.py        # æ–°å¢ï¼šæ¨¡å‹ç¼“å­˜ç®¡ç†
â”œâ”€â”€ migrate_voices.py       # æ–°å¢ï¼šéŸ³è‰²è¿ç§»å·¥å…·
â””â”€â”€ start_all.py           # æ–°å¢ï¼šä¸€é”®å¯åŠ¨è„šæœ¬
```

## ğŸ“– å¦‚ä½•ä½¿ç”¨å¢å¼ºåŠŸèƒ½

1. **éŸ³è‰²åº“**ï¼šåœ¨WebUIä¸­ï¼Œä½¿ç”¨"ğŸµ éŸ³è‰²åº“ç®¡ç†"æŠ˜å é¢æ¿æ¥ä¿å­˜/åŠ è½½/åˆ é™¤è‡ªå®šä¹‰éŸ³è‰²
2. **ASR**ï¼šä¸Šä¼ éŸ³é¢‘æ–‡ä»¶åï¼Œæç¤ºæ–‡æœ¬å°†è‡ªåŠ¨è¯†åˆ«
3. **å¯åŠ¨å¢å¼ºç‰ˆWebUI**ï¼šä½¿ç”¨ `python app_local.py` è€Œä¸æ˜¯ `webui.py` æ¥ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½

---

## ï¿½ğŸ‘‰ğŸ» å®˜æ–¹CosyVoiceä¿¡æ¯ ğŸ‘ˆğŸ»

**Fun-CosyVoice 3.0**: [æ¼”ç¤º](https://funaudiollm.github.io/cosyvoice3/); [è®ºæ–‡](https://arxiv.org/abs/2505.17589); [é­”æ­ç¤¾åŒº](https://www.modelscope.cn/studios/FunAudioLLM/Fun-CosyVoice3-0.5B); [CV3-Eval](https://github.com/FunAudioLLM/CV3-Eval)

**CosyVoice 2.0**: [æ¼”ç¤º](https://funaudiollm.github.io/cosyvoice2/); [è®ºæ–‡](https://arxiv.org/abs/2412.10117); [é­”æ­ç¤¾åŒº](https://www.modelscope.cn/studios/iic/CosyVoice2-0.5B); [HuggingFace](https://huggingface.co/spaces/FunAudioLLM/CosyVoice2-0.5B)

**CosyVoice 1.0**: [æ¼”ç¤º](https://fun-audio-llm.github.io); [è®ºæ–‡](https://funaudiollm.github.io/pdf/CosyVoice_v1.pdf); [é­”æ­ç¤¾åŒº](https://www.modelscope.cn/studios/iic/CosyVoice-300M)

## äº®ç‚¹ğŸ”¥

**Fun-CosyVoice 3.0** æ˜¯ä¸€ä¸ªåŸºäºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„å…ˆè¿›æ–‡æœ¬è½¬è¯­éŸ³ï¼ˆTTSï¼‰ç³»ç»Ÿï¼Œåœ¨å†…å®¹ä¸€è‡´æ€§ã€è¯´è¯äººç›¸ä¼¼åº¦å’ŒéŸµå¾‹è‡ªç„¶åº¦æ–¹é¢è¶…è¶Šäº†å…¶å‰èº«ï¼ˆCosyVoice 2.0ï¼‰ã€‚å®ƒä¸“ä¸ºé‡å¤–é›¶æ ·æœ¬å¤šè¯­è¨€è¯­éŸ³åˆæˆè€Œè®¾è®¡ã€‚

### ä¸»è¦ç‰¹æ€§
- **è¯­è¨€è¦†ç›–**ï¼šæ¶µç›–9ç§å¸¸è§è¯­è¨€ï¼ˆä¸­æ–‡ã€è‹±è¯­ã€æ—¥è¯­ã€éŸ©è¯­ã€å¾·è¯­ã€è¥¿ç­ç‰™è¯­ã€æ³•è¯­ã€æ„å¤§åˆ©è¯­ã€ä¿„è¯­ï¼‰ï¼Œ18+ç§ä¸­æ–‡æ–¹è¨€/å£éŸ³ï¼ˆç²¤è¯­ã€é—½å—è¯­ã€å››å·è¯ã€ä¸œåŒ—è¯ã€é™•è¥¿è¯ã€å±±è¥¿è¯ã€ä¸Šæµ·è¯ã€å¤©æ´¥è¯ã€å±±ä¸œè¯ã€å®å¤è¯ã€ç”˜è‚ƒè¯ç­‰ï¼‰ï¼ŒåŒæ—¶æ”¯æŒå¤šè¯­è¨€/è·¨è¯­è¨€é›¶æ ·æœ¬è¯­éŸ³å…‹éš†ã€‚
- **å†…å®¹ä¸€è‡´æ€§å’Œè‡ªç„¶åº¦**ï¼šåœ¨å†…å®¹ä¸€è‡´æ€§ã€è¯´è¯äººç›¸ä¼¼åº¦å’ŒéŸµå¾‹è‡ªç„¶åº¦æ–¹é¢è¾¾åˆ°ä¸šç•Œé¢†å…ˆæ°´å¹³ã€‚
- **å‘éŸ³ä¿®å¤**ï¼šæ”¯æŒä¸­æ–‡æ‹¼éŸ³å’Œè‹±æ–‡CMUéŸ³ç´ çš„å‘éŸ³ä¿®å¤ï¼Œæä¾›æ›´å¼ºçš„å¯æ§æ€§ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚
- **æ–‡æœ¬æ ‡å‡†åŒ–**ï¼šæ”¯æŒæ•°å­—ã€ç‰¹æ®Šç¬¦å·å’Œå„ç§æ–‡æœ¬æ ¼å¼çš„è¯»å–ï¼Œæ— éœ€ä¼ ç»Ÿçš„å‰ç«¯æ¨¡å—ã€‚
- **åŒå‘æµå¼**ï¼šæ”¯æŒæ–‡æœ¬è¾“å…¥æµå¼å’ŒéŸ³é¢‘è¾“å‡ºæµå¼ï¼Œå»¶è¿Ÿä½è‡³150msï¼ŒåŒæ—¶ä¿æŒé«˜è´¨é‡éŸ³é¢‘è¾“å‡ºã€‚
- **æŒ‡ä»¤æ”¯æŒ**ï¼šæ”¯æŒå„ç§æŒ‡ä»¤ï¼Œå¦‚è¯­è¨€ã€æ–¹è¨€ã€æƒ…æ„Ÿã€è¯­é€Ÿã€éŸ³é‡ç­‰ã€‚


## å¼€å‘è·¯çº¿å›¾

- [x] 2025/12

    - [x] å‘å¸ƒ Fun-CosyVoice3-0.5B-2512 åŸºç¡€æ¨¡å‹ã€RLæ¨¡å‹åŠå…¶è®­ç»ƒ/æ¨ç†è„šæœ¬
    - [x] å‘å¸ƒ Fun-CosyVoice3-0.5B é­”æ­ç¤¾åŒº gradio ç©ºé—´

- [x] 2025/08

    - [x] æ„Ÿè°¢NVIDIAå¼ æ‚¦å‡¯çš„è´¡çŒ®ï¼Œæ·»åŠ triton trtllmè¿è¡Œæ—¶æ”¯æŒå’Œcosyvoice2 grpoè®­ç»ƒæ”¯æŒ

- [x] 2025/07

    - [x] å‘å¸ƒ Fun-CosyVoice 3.0 è¯„ä¼°é›†

- [x] 2025/05

    - [x] æ·»åŠ  CosyVoice2-0.5B vllm æ”¯æŒ

- [x] 2024/12

    - [x] å‘å¸ƒ 25hz CosyVoice2-0.5B

- [x] 2024/09

    - [x] 25hz CosyVoice-300M åŸºç¡€æ¨¡å‹
    - [x] 25hz CosyVoice-300M è¯­éŸ³è½¬æ¢åŠŸèƒ½

- [x] 2024/08

    - [x] é‡å¤æ„ŸçŸ¥é‡‡æ ·(RAS)æ¨ç†ï¼Œæå‡llmç¨³å®šæ€§
    - [x] æµå¼æ¨ç†æ¨¡å¼æ”¯æŒï¼ŒåŒ…æ‹¬kvç¼“å­˜å’Œsdpaä»¥ä¼˜åŒ–rtf

- [x] 2024/07

    - [x] Flow matching è®­ç»ƒæ”¯æŒ
    - [x] å½“ttsfrdä¸å¯ç”¨æ—¶æ”¯æŒWeTextProcessing
    - [x] Fastapi æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯

## è¯„ä¼°ç»“æœ
| æ¨¡å‹ | CER (%) â†“ (test-zh) | WER (%) â†“ (test-en) | CER (%) â†“ (test-hard) |
|-----|------------------|------------------|------------------|
| Human | 1.26 | 2.14 | - |
| F5-TTS | 1.53 | 2.00 | 8.67 |
| SparkTTS | 1.20 | 1.98 | - |
| Seed-TTS | 1.12 | 2.25 | 7.59 |
| CosyVoice2 | 1.45 | 2.57 | 6.83 |
| FireRedTTS-2 | 1.14 | 1.95 | - |
| IndexTTS2 | 1.01 | 1.52 | 7.12 |
| VibeVoice | 1.16 | 3.04 | - |
| HiggsAudio | 1.79 | 2.44 | - |
| MiniMax-Speech | 0.83 | 1.65 | - |
| VoxPCM | 0.93 | 1.85 | 8.87 |
| GLM-TTS | 1.03 | - | - |
| GLM-TTS_RL | 0.89 | - | - |
| Fun-CosyVoice3-0.5B-2512 | 1.21 |  2.24 | 6.71 |
| Fun-CosyVoice3-0.5B-2512_RL | 0.81 | 1.68 | 5.44 |


## å®‰è£…

### å…‹éš†å’Œå®‰è£…

- å…‹éš†ä»£ç ä»“åº“
    ``` sh
    git clone --recursive https://github.com/FunAudioLLM/CosyVoice.git
    # å¦‚æœç”±äºç½‘ç»œåŸå› å…‹éš†å­æ¨¡å—å¤±è´¥ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ç›´åˆ°æˆåŠŸ
    cd CosyVoice
    git submodule update --init --recursive
    ```

- å®‰è£… Condaï¼šè¯·å‚é˜… https://docs.conda.io/en/latest/miniconda.html
- åˆ›å»º Conda ç¯å¢ƒï¼š

    ``` sh
    conda create -n cosyvoice -y python=3.10
    conda activate cosyvoice
    pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/ --trusted-host=mirrors.aliyun.com

    # å¦‚æœé‡åˆ°soxå…¼å®¹æ€§é—®é¢˜
    # ubuntu
    sudo apt-get install sox libsox-dev
    # centos
    sudo yum install sox sox-devel
    ```

### æ¨¡å‹ä¸‹è½½

æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨ä¸‹è½½é¢„è®­ç»ƒçš„ `Fun-CosyVoice3-0.5B`ã€`CosyVoice2-0.5B`ã€`CosyVoice-300M`ã€`CosyVoice-300M-SFT`ã€`CosyVoice-300M-Instruct` æ¨¡å‹å’Œ `CosyVoice-ttsfrd` èµ„æºã€‚

**æ‰€æœ‰é¢„è®­ç»ƒæ¨¡å‹åº”æ”¾ç½®åœ¨ `pretrained_models/` ç›®å½•ä¸­ã€‚**

#### æ–¹æ³•1ï¼šä½¿ç”¨Python SDKä¸‹è½½ï¼ˆæ¨èï¼‰

``` python
# SDKæ¨¡å‹ä¸‹è½½
from modelscope import snapshot_download
snapshot_download('FunAudioLLM/Fun-CosyVoice3-0.5B-2512', local_dir='pretrained_models/Fun-CosyVoice3-0.5B')
snapshot_download('iic/CosyVoice2-0.5B', local_dir='pretrained_models/CosyVoice2-0.5B')
snapshot_download('iic/CosyVoice-300M', local_dir='pretrained_models/CosyVoice-300M')
snapshot_download('iic/CosyVoice-300M-SFT', local_dir='pretrained_models/CosyVoice-300M-SFT')
snapshot_download('iic/CosyVoice-300M-Instruct', local_dir='pretrained_models/CosyVoice-300M-Instruct')
snapshot_download('iic/CosyVoice-ttsfrd', local_dir='pretrained_models/CosyVoice-ttsfrd')
```

#### æ–¹æ³•2ï¼šæ‰‹åŠ¨ä¸‹è½½

æ‚¨ä¹Ÿå¯ä»¥ä»ä»¥ä¸‹åœ°å€æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹ï¼š
- **é­”æ­ç¤¾åŒºï¼ˆModelScopeï¼‰**ï¼š 
  - [Fun-CosyVoice3-0.5B-2512](https://www.modelscope.cn/models/FunAudioLLM/Fun-CosyVoice3-0.5B-2512)
  - [CosyVoice2-0.5B](https://www.modelscope.cn/models/iic/CosyVoice2-0.5B)
  - [CosyVoice-300M](https://www.modelscope.cn/models/iic/CosyVoice-300M)
  - [CosyVoice-300M-SFT](https://www.modelscope.cn/models/iic/CosyVoice-300M-SFT)
  - [CosyVoice-300M-Instruct](https://www.modelscope.cn/models/iic/CosyVoice-300M-Instruct)
  - [CosyVoice-ttsfrd](https://www.modelscope.cn/models/iic/CosyVoice-ttsfrd)
- **HuggingFace**: [FunAudioLLM ç»„ç»‡](https://huggingface.co/FunAudioLLM)

ä¸‹è½½åï¼Œå°†å®ƒä»¬æ”¾ç½®åœ¨ `pretrained_models/` ç›®å½•ä¸­ï¼Œç»“æ„å¦‚ä¸‹ï¼š
```
pretrained_models/
â”œâ”€â”€ Fun-CosyVoice3-0.5B/
â”œâ”€â”€ CosyVoice2-0.5B/
â”œâ”€â”€ CosyVoice-300M/
â”œâ”€â”€ CosyVoice-300M-SFT/
â”œâ”€â”€ CosyVoice-300M-Instruct/
â””â”€â”€ CosyVoice-ttsfrd/
```

#### å¯é€‰ï¼šç”¨äºéŸ³é¢‘è¯†åˆ«çš„ASRæ¨¡å‹

å¦‚æœéœ€è¦åœ¨WebUIä¸­ä½¿ç”¨éŸ³é¢‘è‡ªåŠ¨è¯†åˆ«åŠŸèƒ½ï¼Œå¯ä»¥ä¸‹è½½ SenseVoiceSmall æ¨¡å‹ï¼š
``` python
snapshot_download('iic/SenseVoiceSmall', local_dir='pretrained_models/SenseVoiceSmall')
```

å¯é€‰åœ°ï¼Œæ‚¨å¯ä»¥è§£å‹ `ttsfrd` èµ„æºå¹¶å®‰è£… `ttsfrd` åŒ…ä»¥è·å¾—æ›´å¥½çš„æ–‡æœ¬æ ‡å‡†åŒ–æ€§èƒ½ã€‚

æ³¨æ„ï¼Œè¿™ä¸€æ­¥ä¸æ˜¯å¿…éœ€çš„ã€‚å¦‚æœæ‚¨ä¸å®‰è£… `ttsfrd` åŒ…ï¼Œæˆ‘ä»¬å°†é»˜è®¤ä½¿ç”¨ wetextã€‚

``` sh
cd pretrained_models/CosyVoice-ttsfrd/
unzip resource.zip -d .
pip install ttsfrd_dependency-0.1-py3-none-any.whl
pip install ttsfrd-0.4.2-cp310-cp310-linux_x86_64.whl
```

## é¡¹ç›®ç»“æ„

å®‰è£…å’Œæ¨¡å‹ä¸‹è½½åï¼Œæ‚¨çš„é¡¹ç›®ç»“æ„åº”å¦‚ä¸‹æ‰€ç¤ºï¼š

```
CosyVoice/
â”œâ”€â”€ pretrained_models/          # é¢„è®­ç»ƒæ¨¡å‹ç›®å½•
â”‚   â”œâ”€â”€ Fun-CosyVoice3-0.5B/   # Fun-CosyVoice 3.0 æ¨¡å‹
â”‚   â”œâ”€â”€ CosyVoice2-0.5B/       # CosyVoice 2.0 æ¨¡å‹
â”‚   â”œâ”€â”€ CosyVoice-300M/        # CosyVoice 1.0 åŸºç¡€æ¨¡å‹
â”‚   â”œâ”€â”€ CosyVoice-300M-SFT/    # CosyVoice SFT æ¨¡å‹
â”‚   â”œâ”€â”€ CosyVoice-300M-Instruct/ # CosyVoice Instruct æ¨¡å‹
â”‚   â”œâ”€â”€ CosyVoice-ttsfrd/      # æ–‡æœ¬æ ‡å‡†åŒ–èµ„æº
â”‚   â””â”€â”€ SenseVoiceSmall/       # ï¼ˆå¯é€‰ï¼‰ASRæ¨¡å‹
â”œâ”€â”€ custom_voices/              # è‡ªå®šä¹‰éŸ³è‰²åº“å­˜å‚¨
â”‚   â””â”€â”€ [voice_id]/            # æ¯ä¸ªè‡ªå®šä¹‰éŸ³è‰²éƒ½æœ‰è‡ªå·±çš„æ–‡ä»¶å¤¹
â”‚       â”œâ”€â”€ audio.wav          # éŸ³è‰²éŸ³é¢‘æ ·æœ¬
â”‚       â””â”€â”€ metadata.json      # éŸ³è‰²å…ƒæ•°æ®ï¼ˆåç§°ã€æ–‡æœ¬ç­‰ï¼‰
â”œâ”€â”€ cosyvoice/                  # CosyVoiceæ ¸å¿ƒåº“
â”œâ”€â”€ third_party/                # ç¬¬ä¸‰æ–¹ä¾èµ–
â”œâ”€â”€ webui.py                    # å®˜æ–¹Webç•Œé¢
â”œâ”€â”€ app_local.py                # å¢å¼ºç‰ˆæœ¬åœ°Webç•Œé¢ï¼ˆå«éŸ³è‰²åº“ï¼‰
â”œâ”€â”€ voice_manager.py            # éŸ³è‰²åº“ç®¡ç†æ¨¡å—
â””â”€â”€ requirements.txt            # Pythonä¾èµ–
```

### å…³äº `custom_voices` æ–‡ä»¶å¤¹

`custom_voices/` ç›®å½•ç”¨äºå­˜å‚¨é€šè¿‡WebUIåˆ›å»ºçš„è‡ªå®šä¹‰éŸ³è‰²é…ç½®æ–‡ä»¶ã€‚æ¯ä¸ªéŸ³è‰²é…ç½®æ–‡ä»¶åŒ…å«ï¼š
- **éŸ³é¢‘æ ·æœ¬**ï¼šç”¨äºè¯­éŸ³å…‹éš†çš„å‚è€ƒéŸ³é¢‘æ–‡ä»¶ï¼ˆWAVæ ¼å¼ï¼‰
- **å…ƒæ•°æ®**ï¼šéŸ³è‰²åç§°ã€æç¤ºæ–‡æœ¬ã€åˆ›å»ºæ—¶é—´å’ŒéŸ³è‰²ID

æ‚¨å¯ä»¥ï¼š
- ä»WebUIä¿å­˜è‡ªå®šä¹‰éŸ³è‰²ä»¥ä¾›æ—¥åé‡å¤ä½¿ç”¨
- åŠ è½½å·²ä¿å­˜çš„éŸ³è‰²è€Œæ— éœ€é‡æ–°ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶
- ç®¡ç†ï¼ˆåˆ é™¤ï¼‰ä¸éœ€è¦çš„éŸ³è‰²é…ç½®æ–‡ä»¶
- é€šè¿‡å¤åˆ¶éŸ³è‰²æ–‡ä»¶å¤¹æ¥åˆ†äº«éŸ³è‰²é…ç½®æ–‡ä»¶

**æ³¨æ„**ï¼šæ­¤æ–‡ä»¶å¤¹å·²é€šè¿‡ `.gitignore` æ’é™¤åœ¨Gitä¹‹å¤–ï¼Œä»¥ä¿æŒä»“åº“æ•´æ´ã€‚

## åŸºæœ¬ä½¿ç”¨

æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½¿ç”¨ `Fun-CosyVoice3-0.5B` ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚
è¯·å‚é˜… `example.py` ä¸­çš„ä»£ç äº†è§£æ¯ä¸ªæ¨¡å‹çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•ã€‚
```sh
python example.py
```

#### CosyVoice2 vllm ä½¿ç”¨

å¦‚æœæ‚¨æƒ³ä½¿ç”¨ vllm è¿›è¡Œæ¨ç†ï¼Œè¯·å®‰è£… `vllm==v0.9.0`ã€‚è¾ƒæ—§çš„ vllm ç‰ˆæœ¬ä¸æ”¯æŒ CosyVoice2 æ¨ç†ã€‚

æ³¨æ„ `vllm==v0.9.0` æœ‰å¾ˆå¤šç‰¹å®šè¦æ±‚ï¼Œä¾‹å¦‚ `torch==2.7.0`ã€‚æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°ç¯å¢ƒä»¥é˜²ç¡¬ä»¶ä¸æ”¯æŒ vllm ä¸”æ—§ç¯å¢ƒæŸåã€‚

``` sh
conda create -n cosyvoice_vllm --clone cosyvoice
conda activate cosyvoice_vllm
pip install vllm==v0.9.0 transformers==4.51.3 -i https://mirrors.aliyun.com/pypi/simple/ --trusted-host=mirrors.aliyun.com
python vllm_example.py
```

#### å¯åŠ¨Webæ¼”ç¤º

æ‚¨å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„Webæ¼”ç¤ºé¡µé¢å¿«é€Ÿç†Ÿæ‚‰ CosyVoiceã€‚

**é€‰é¡¹1ï¼šå®˜æ–¹WebUI**
``` python
# ä½¿ç”¨ iic/CosyVoice-300M-SFT è¿›è¡Œsftæ¨ç†ï¼Œæˆ–ä½¿ç”¨ iic/CosyVoice-300M-Instruct è¿›è¡Œinstructæ¨ç†
python3 webui.py --port 50000 --model_dir pretrained_models/CosyVoice-300M
```

**é€‰é¡¹2ï¼šå¢å¼ºç‰ˆæœ¬åœ°WebUIï¼ˆå«éŸ³è‰²åº“ï¼‰**
``` python
# æ¨èï¼šä½¿ç”¨ app_local.py è·å–éŸ³è‰²åº“ç®¡ç†å’ŒASRåŠŸèƒ½
python3 app_local.py --port 50000 --model_dir pretrained_models/Fun-CosyVoice3-0.5B
```

å¢å¼ºç‰ˆWebUIï¼ˆ`app_local.py`ï¼‰åŒ…æ‹¬ï¼š
- éŸ³è‰²åº“ç®¡ç†ï¼ˆä¿å­˜/åŠ è½½/åˆ é™¤è‡ªå®šä¹‰éŸ³è‰²ï¼‰
- PromptéŸ³é¢‘çš„è‡ªåŠ¨è¯­éŸ³è¯†åˆ«
- éŸ³é¢‘åå¤„ç†å’Œå¢å¼º
- è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­å¯åŠ¨

#### é«˜çº§ç”¨æ³•

å¯¹äºé«˜çº§ç”¨æˆ·ï¼Œæˆ‘ä»¬åœ¨ `examples/libritts/cosyvoice/run.sh` ä¸­æä¾›äº†è®­ç»ƒå’Œæ¨ç†è„šæœ¬ã€‚

#### æ„å»ºéƒ¨ç½²

å¯é€‰åœ°ï¼Œå¦‚æœæ‚¨æƒ³è¿›è¡ŒæœåŠ¡éƒ¨ç½²ï¼Œ
å¯ä»¥è¿è¡Œä»¥ä¸‹æ­¥éª¤ã€‚

``` sh
cd runtime/python
docker build -t cosyvoice:v1.0 .
# å¦‚æœè¦ä½¿ç”¨instructæ¨ç†ï¼Œè¯·å°† iic/CosyVoice-300M æ›´æ”¹ä¸º iic/CosyVoice-300M-Instruct
# grpc ç”¨æ³•
docker run -d --runtime=nvidia -p 50000:50000 cosyvoice:v1.0 /bin/bash -c "cd /opt/CosyVoice/CosyVoice/runtime/python/grpc && python3 server.py --port 50000 --max_conc 4 --model_dir iic/CosyVoice-300M && sleep infinity"
cd grpc && python3 client.py --port 50000 --mode <sft|zero_shot|cross_lingual|instruct>
# fastapi ç”¨æ³•
docker run -d --runtime=nvidia -p 50000:50000 cosyvoice:v1.0 /bin/bash -c "cd /opt/CosyVoice/CosyVoice/runtime/python/fastapi && python3 server.py --port 50000 --model_dir iic/CosyVoice-300M && sleep infinity"
cd fastapi && python3 client.py --port 50000 --mode <sft|zero_shot|cross_lingual|instruct>
```

#### ä½¿ç”¨ Nvidia TensorRT-LLM è¿›è¡Œéƒ¨ç½²

ä½¿ç”¨ TensorRT-LLM åŠ é€Ÿ cosyvoice2 llm å¯ä»¥æ¯” huggingface transformers å®ç°è·å¾—4å€çš„åŠ é€Ÿã€‚
å¿«é€Ÿå…¥é—¨ï¼š

``` sh
cd runtime/triton_trtllm
docker compose up -d
```
æ›´å¤šè¯¦æƒ…ï¼Œè¯·æŸ¥çœ‹[è¿™é‡Œ](https://github.com/FunAudioLLM/CosyVoice/tree/main/runtime/triton_trtllm)

## è®¨è®ºä¸äº¤æµ

æ‚¨å¯ä»¥ç›´æ¥åœ¨ [Github Issues](https://github.com/FunAudioLLM/CosyVoice/issues) ä¸Šè®¨è®ºã€‚

æ‚¨ä¹Ÿå¯ä»¥æ‰«æäºŒç»´ç åŠ å…¥æˆ‘ä»¬çš„å®˜æ–¹é’‰é’‰äº¤æµç¾¤ã€‚

<img src="./asset/dingding.png" width="250px">

## è‡´è°¢

1. æˆ‘ä»¬ä» [FunASR](https://github.com/modelscope/FunASR) å€Ÿç”¨äº†å¤§é‡ä»£ç ã€‚
2. æˆ‘ä»¬ä» [FunCodec](https://github.com/modelscope/FunCodec) å€Ÿç”¨äº†å¤§é‡ä»£ç ã€‚
3. æˆ‘ä»¬ä» [Matcha-TTS](https://github.com/shivammehta25/Matcha-TTS) å€Ÿç”¨äº†å¤§é‡ä»£ç ã€‚
4. æˆ‘ä»¬ä» [AcademiCodec](https://github.com/yangdongchao/AcademiCodec) å€Ÿç”¨äº†å¤§é‡ä»£ç ã€‚
5. æˆ‘ä»¬ä» [WeNet](https://github.com/wenet-e2e/wenet) å€Ÿç”¨äº†å¤§é‡ä»£ç ã€‚

## å¼•ç”¨

``` bibtex
@article{du2024cosyvoice,
  title={Cosyvoice: A scalable multilingual zero-shot text-to-speech synthesizer based on supervised semantic tokens},
  author={Du, Zhihao and Chen, Qian and Zhang, Shiliang and Hu, Kai and Lu, Heng and Yang, Yexin and Hu, Hangrui and Zheng, Siqi and Gu, Yue and Ma, Ziyang and others},
  journal={arXiv preprint arXiv:2407.05407},
  year={2024}
}

@article{du2024cosyvoice,
  title={Cosyvoice 2: Scalable streaming speech synthesis with large language models},
  author={Du, Zhihao and Wang, Yuxuan and Chen, Qian and Shi, Xian and Lv, Xiang and Zhao, Tianyu and Gao, Zhifu and Yang, Yexin and Gao, Changfeng and Wang, Hui and others},
  journal={arXiv preprint arXiv:2412.10117},
  year={2024}
}

@article{du2025cosyvoice,
  title={CosyVoice 3: Towards In-the-wild Speech Generation via Scaling-up and Post-training},
  author={Du, Zhihao and Gao, Changfeng and Wang, Yuxuan and Yu, Fan and Zhao, Tianyu and Wang, Hao and Lv, Xiang and Wang, Hui and Shi, Xian and An, Keyu and others},
  journal={arXiv preprint arXiv:2505.17589},
  year={2025}
}

@inproceedings{lyu2025build,
  title={Build LLM-Based Zero-Shot Streaming TTS System with Cosyvoice},
  author={Lyu, Xiang and Wang, Yuxuan and Zhao, Tianyu and Wang, Hao and Liu, Huadai and Du, Zhihao},
  booktitle={ICASSP 2025-2025 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP)},
  pages={1--2},
  year={2025},
  organization={IEEE}
}
```

## å…è´£å£°æ˜
ä»¥ä¸Šæä¾›çš„å†…å®¹ä»…ç”¨äºå­¦æœ¯ç›®çš„ï¼Œæ—¨åœ¨æ¼”ç¤ºæŠ€æœ¯èƒ½åŠ›ã€‚éƒ¨åˆ†ç¤ºä¾‹æ¥æºäºäº’è”ç½‘ã€‚å¦‚æœä»»ä½•å†…å®¹ä¾µçŠ¯äº†æ‚¨çš„æƒåˆ©ï¼Œè¯·è”ç³»æˆ‘ä»¬è¦æ±‚åˆ é™¤ã€‚
